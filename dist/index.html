<!DOCTYPE html><html lang="en"><head><title>BACK</title><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><style type="text/css">body,html{width:100%;height:100%;margin:0;padding:0;overflow:hidden;background-color:#fff;color:#000}#game{display:block;height:100%;margin:0 auto;image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-o-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:pixelated}</style></head><body><canvas id="game" height="400"></canvas><script type="text/javascript">!function(t){var e={};function s(i){if(e[i])return e[i].exports;var h=e[i]={i:i,l:!1,exports:{}};return t[i].call(h.exports,h,h.exports,s),h.l=!0,h.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var h in t)s.d(i,h,function(e){return t[e]}.bind(null,h));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e,s){},function(t,e,s){"use strict";s.r(e);var i;s(0);function h(t,e,s,i=!1){t.addEventListener(e,s,i)}class r{static get(t=1,e=0,s=!0){if(t<=e)return t;r.seed=(9301*r.seed+49297)%233280;let i=e+r.seed/233280*(t-e);return s?Math.round(i):i}}r.seed=Math.random(),function(t){t[t.FIRE=0]="FIRE",t[t.ALT=32]="ALT",t[t.LEFT=65]="LEFT",t[t.RIGHT=68]="RIGHT",t[t.UP=87]="UP",t[t.DOWN=83]="DOWN"}(i||(i={}));class o{constructor(){this.children=[]}addChild(t){this.children.push(t),t.parent=this}removeChild(t){const e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),t.parent=null)}render(t){this.children.forEach(e=>e.render(t))}update(t){this.children.forEach(e=>e.update(t))}}class n{constructor(t=0,e=0){this.x=t,this.y=e}clone(){return new n(this.x,this.y)}set(t,e){return t instanceof n?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this}add(t,e){return t instanceof n?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=e),this}sub(t,e){return t instanceof n?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=e),this}scale(t){return this.x*=t,this.y*=t,this}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){var t=this.length();return t>0&&this.scale(1/t),this}}class d{constructor(t,e,s=e){this.pos=t,this.width=e,this.height=s}get x(){return this.pos.x-this.width/2}get y(){return this.pos.y-this.height/2}collide(t){return this.pos.x<t.pos.x+t.width&&this.pos.x+this.width>t.pos.x&&this.pos.y<t.pos.y+t.height&&this.height+this.pos.y>t.pos.y}contains(t){return this.pos.x<=t.pos.x&&this.pos.x+this.width>=t.pos.x+t.width&&this.pos.y<=t.pos.y&&this.pos.y+this.height>=t.pos.y+t.height}intersect(t){let e=Math.round(this.pos.x),s=Math.round(this.pos.y),i=e+this.width,h=s+this.height,r=Math.round(t.pos.x),o=Math.round(t.pos.y),u=r+t.width,a=o+t.height,c=e<r?r:e,l=s<o?o:s,p=i<u?i:u,f=h<a?h:a;return new d(new n(c,l),p-c,f-l)}}class u extends o{constructor(t){super(),this.factory=t,this.pool=[]}create(t=null){let e=this.pool.pop();return e||(e=this.factory()),this.addChild(e),t&&t(e),e}removeChild(t){super.removeChild(t),this.pool.push(t)}}class a extends o{constructor(){super(...arguments),this.pos=new n,this.dir=new n,this.spd=.4,this.box=new d(this.pos,6)}render(t){t.save(),t.fillStyle="black",t.beginPath(),t.arc(Math.round(this.pos.x),Math.round(this.pos.y),this.box.width/2,0,2*Math.PI),t.closePath(),t.fill(),t.restore()}update(t){const e=this.pos,s=this.spd*t;e.add(this.dir.x*s,this.dir.y*s),this.parent&&(Math.abs(e.x)>500||Math.abs(e.y)>500)&&this.parent.removeChild(this)}}class c extends o{constructor(){super(),this.pos=new n(0,100),this.dir=new n,this.aim=new n,this.spd=.2,this.box=new d(this.pos,16,24),this.fire=!1,this.fireTime=0,this.fireSpeed=100,this.bullets=new u(()=>new a),this.addChild(this.bullets)}render(t){super.render(t);const e=this.box;t.save(),t.fillStyle="blue",t.fillRect(Math.round(e.x),Math.round(e.y),e.width,e.height),t.restore()}update(t){super.update(t);const e=this.spd*t;this.pos.add(this.dir.x*e,this.dir.y*e),this.fireTime-=t,this.fire&&this.fireTime<=0&&(this.bullets.create(t=>{t.pos.set(this.pos),t.dir=this.aim.clone().sub(this.pos).normalize()}),this.fireTime=this.fireSpeed)}}class l extends o{constructor(t){super(),this.hero=t,this.pos=new n,this.dir=new n,this.spd=.1,this.box=new d(this.pos,16,16)}render(t){const e=this.box;t.save(),t.fillStyle="red",t.fillRect(Math.round(e.x),Math.round(e.y),e.width,e.height),t.restore()}update(t){for(const t of this.hero.bullets.children)if(this.box.collide(t.box))return this.parent.removeChild(this),void this.hero.bullets.removeChild(t);this.dir=this.hero.pos.clone().sub(this.pos).normalize();const e=this.spd*t;this.pos.add(this.dir.x*e,this.dir.y*e)}}class p extends u{constructor(t,e,s=new n,i=0){super(t),this.factory=t,this.init=e,this.pos=s,this.period=i,this.time=0,this.box=new d(this.pos,16,16)}update(t){super.update(t),this.period<=0||(this.time+=t,this.time>this.period&&(this.time-=this.period,this.create(this.init)))}}class f extends p{render(t){super.render(t),this.period&&(t.save(),t.fillStyle="grey",t.beginPath(),t.arc(Math.round(this.pos.x),Math.round(this.pos.y),this.box.width/2,0,2*Math.PI),t.closePath(),t.fill(),t.restore())}}const y=(x="#game",(m||document).querySelector(x));var x,m;const w=y.getContext("2d"),b=new class extends o{constructor(t){super(),this.hero=new c,this.enemies=[];for(const e of t){const t=new f(()=>new l(this.hero),t=>{const e=new n(Math.random()-.5,Math.random()-.5);e.normalize().scale(8).add(t.parent.pos),t.pos.set(e)},new n(e[0],e[1]),500);this.enemies.push(t),this.addChild(t)}this.addChild(this.hero)}pointer(t,e){this.hero.aim.set(t,e)}input(t,e){let s=0,h=0;t[i.LEFT]&&(s-=1),t[i.RIGHT]&&(s+=1),t[i.UP]&&(h-=1),t[i.DOWN]&&(h+=1),this.hero.dir.set(s,h),this.hero.fire=!0===t[i.FIRE]}}([[-100,-150],[100,-100]]),g=[];let v;function M(){const t=(new Date).getTime();requestAnimationFrame(M),b.update(t-v),v=t,w.save(),w.clearRect(0,0,y.width,y.height),w.translate(y.width/2,y.height/2),b.render(w),w.restore()}function T(){const t=document.body;y.width=y.height/t.clientHeight*t.clientWidth}h(window,"load",async()=>{T(),h(document,"keydown",t=>{g[t.keyCode]=!0,b.input(g,!0)}),h(document,"keyup",t=>{g[t.keyCode]=!1,b.input(g,!1)}),h(document,"mousedown",t=>{g[t.button]=!0,b.input(g,!0)}),h(document,"mouseup",t=>{g[t.button]=!1,b.input(g,!1)}),h(document,"mousemove",t=>{const e=document.body,s=y.height/e.clientHeight,i=(t.clientX-e.clientWidth/2)*s,h=(t.clientY-e.clientHeight/2)*s;b.pointer(i,h)}),h(window,"resize",T),v=(new Date).getTime(),M()})}]);</script></body></html>