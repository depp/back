<!DOCTYPE html><html lang="en"><head><title>BACK</title><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"><style type="text/css">body,html{width:100%;height:100%;margin:0;padding:0;overflow:hidden;background-color:#fff;color:#000}#game{position:absolute;top:0;left:0;right:0;bottom:0}</style></head><body><canvas id="game" width="192" height="192"></canvas><script type="text/javascript">!function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e,r){},function(t,e){t.exports="precision mediump float;attribute vec3 aPos;attribute vec3 aNorm;uniform mat4 uWorld;uniform mat4 uProj;uniform mat3 uInverse;uniform float uStroke;varying vec4 vPos;varying vec3 vNorm;void main(){vec4 a;a.w=1.0;a.xyz=(aPos+(aNorm*uStroke));vPos=(uWorld*a);vNorm=(uInverse*aNorm);gl_Position=(uProj*vPos);}"},function(t,e){t.exports="precision mediump float;uniform vec4 uColor;uniform vec3 uLight;varying vec4 vPos;varying vec3 vNorm;void main(){float a;vec3 b;b=normalize((uLight-vPos.xyz));vec3 c;c=normalize(vNorm);vec3 d;d=normalize(-(vPos.xyz));vec3 e;vec3 f;f=-(b);e=(f-(2.0*(dot(c,f)*c)));a=0.0;if((uColor.w>0.0)){a=pow(max(dot(e,d),0.0),uColor.w);}mediump vec4 g;g.w=1.0;g.xyz=(uColor.xyz*((vec3(0.2,0.2,0.2)+(vec3(0.8,0.8,0.8)*a))+(vec3(0.8,0.8,0.8)*max(dot(c,b),0.0))));gl_FragColor=g;}"},function(t,e,r){"use strict";r.r(e);r(0);window.AudioContext=window.AudioContext||window.webkitAudioContext,window.OfflineAudioContext=window.OfflineAudioContext||window.webkitOfflineAudioContext;const i=new AudioContext,n={},o={},s=[];let a;class c{constructor(t,e,r){this.type=t,this.length=r,this.curve=Float32Array.from(e)}getTime(t){return(t<this.length?t:this.length)-.01}}var u={async init(){"suspended"===i.state&&await i.resume();const t=Math.pow(2,1/12);for(let e=-57;e<50;e++)s.push(440*Math.pow(t,e));const e=(a=i.createBuffer(1,88200,44100)).getChannelData(0);for(let t=0;t<88200;t++)e[t]=2*Math.random()-1},async sound(t,e,r,i){const n=new OfflineAudioContext(1,44100*i,44100),s=n.createGain(),c=Float32Array.from(r);if(s.connect(n.destination),e.curve&&s.gain.setValueCurveAtTime(e.curve,0,e.getTime(i)),n.addEventListener("complete",e=>o[t]=e.renderedBuffer),"custom"==e.type){const t=n.createBiquadFilter();t.connect(s),t.detune.setValueCurveAtTime(c,0,i);const e=n.createBufferSource();e.buffer=a,e.loop=!0,e.connect(t),e.start()}else{const t=n.createOscillator();t.type=e.type,t.frequency.setValueCurveAtTime(c,0,i),t.connect(s),t.start(),t.stop(i)}await n.startRendering()},async music(t,e){const r=e.reduce((t,e)=>e.length>t?e.length:t,0),i=new OfflineAudioContext(1,44100*r,44100);i.addEventListener("complete",e=>o[t]=e.renderedBuffer),e.forEach((t,e)=>t.play(i)),await i.startRendering()},mixer:t=>(t in n||(n[t]=i.createGain(),n[t].connect(i.destination)),n[t]),play(t,e=!1,r="master"){if(t in o){let n=i.createBufferSource();return n.loop=e,n.buffer=o[t],n.connect(this.mixer(r)),n.start(),n}return null}};const h=Math.PI/180;class l{constructor(t=0,e=0,r=0){this.x=t,this.y=e,this.z=r}set(t,e,r){return t instanceof l?(this.x=t.x,this.y=t.y,this.z=t.z,this):("number"==typeof t&&(this.x=t),"number"==typeof e&&(this.y=e),"number"==typeof r&&(this.z=r),this)}max(){return Math.max(this.x,this.y,this.z)}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}distance(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y)+(this.z-t.z)*(this.z-t.z))}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){let e=this.x,r=this.y,i=this.z,n=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*n-e*s,this.z=e*o-r*n,this}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}scale(t){return this.x*=t instanceof l?t.x:t,this.y*=t instanceof l?t.y:t,this.z*=t instanceof l?t.z:t,this}normalize(){var t=this.length();return t>0&&this.scale(1/t),this}clone(){return new l(this.x,this.y,this.z)}invert(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}toArray(){return[this.x,this.y,this.z]}}class f{constructor(t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]){this.data=t}clone(){return new f(this.data)}multiply(t){const e=this.data,r=e[0],i=e[1],n=e[2],o=e[3],s=e[4],a=e[5],c=e[6],u=e[7],h=e[8],l=e[9],f=e[10],m=e[11],d=e[12],y=e[13],v=e[14],p=e[15],g=t[0],x=t[1],w=t[2],b=t[3],z=t[4],A=t[5],P=t[6],M=t[7],S=t[8],C=t[9],O=t[10],T=t[11],L=t[12],N=t[13],_=t[14],E=t[15];return this.data=[r*g+i*z+n*S+o*L,r*x+i*A+n*C+o*N,r*w+i*P+n*O+o*_,r*b+i*M+n*T+o*E,s*g+a*z+c*S+u*L,s*x+a*A+c*C+u*N,s*w+a*P+c*O+u*_,s*b+a*M+c*T+u*E,h*g+l*z+f*S+m*L,h*x+l*A+f*C+m*N,h*w+l*P+f*O+m*_,h*b+l*M+f*T+m*E,d*g+y*z+v*S+p*L,d*x+y*A+v*C+p*N,d*w+y*P+v*O+p*_,d*b+y*M+v*T+p*E],this}scale(t){return this.multiply([t.x,0,0,0,0,t.y,0,0,0,0,t.z,0,0,0,0,1])}translate(t){return this.multiply([1,0,0,0,0,1,0,0,0,0,1,0,t.x,t.y,t.z,1])}rotateX(t){const e=Math.cos(t),r=Math.sin(t);return this.multiply([1,0,0,0,0,e,r,0,0,-r,e,0,0,0,0,1])}rotateY(t){const e=Math.cos(t),r=Math.sin(t);return this.multiply([e,0,-r,0,0,1,0,0,r,0,e,0,0,0,0,1])}rotateZ(t){const e=Math.cos(t),r=Math.sin(t);return this.multiply([e,r,0,0,-r,e,0,0,0,0,1,0,0,0,0,1])}rotate(t){return this.rotateX(t.x).rotateY(t.y).rotateZ(t.z)}invert(){let t=this.data,e=t[0],r=t[1],i=t[2],n=t[4],o=t[5],s=t[6],a=t[8],c=t[9],u=t[10],h=u*o-s*c,l=-u*n+s*a,f=c*n-o*a,m=e*h+r*l+i*f;if(!m)return null;const d=1/m,y=[h*d,(-u*r+i*c)*d,(s*r-i*o)*d,l*d,(u*e-i*a)*d,(-s*e+i*n)*d,f*d,(-c*e+r*a)*d,(o*e-r*n)*d];return r=y[1],i=y[2],s=y[5],y[1]=y[3],y[2]=y[6],y[3]=r,y[5]=y[7],y[6]=i,y[7]=s,y}}class m{constructor(t=[]){this.translate=new l(t[0]||0,t[1]||0,t[2]||0),this.rotate=new l(t[3]||0,t[4]||0,t[5]||0),this.scale=new l(t[6]||1,t[7]||1,t[8]||1)}matrix(t){return(t=t||new f).scale(this.scale).rotate(this.rotate.clone().scale(h)).translate(this.translate),this.parent?this.parent.matrix(t):t}}function d(t,e,r,i=!1){t.addEventListener(e,r,i)}class y{static get(t=1,e=0,r=!0){if(t<=e)return t;y.seed=(9301*y.seed+49297)%233280;let i=e+y.seed/233280*(t-e);return r?Math.round(i):i}}y.seed=Math.random();const v=(p="#game",(g||document).querySelector(p));var p,g;const x=v.getContext("webgl"),w=new l(5,15,7),b=new class{constructor(t=1,e=45,r=.1,i=100){this.aspect=t,this.fov=e,this.near=r,this.far=i,this.rotate=new l,this.position=new l,this.fov=e,this.aspect=t,this.near=r,this.far=i}transform(t){return t.matrix().rotate(this.rotate.clone().invert()).translate(this.position.clone().invert())}perspective(){const t=this.near,e=this.far,r=Math.tan(.5*Math.PI-.5*this.fov),i=1/(t-e);return(new f).multiply([r/this.aspect,0,0,0,0,r,0,0,0,0,(t+e)*i,-1,0,0,t*e*i*2,0])}}(v.width/v.height),z=new class{constructor(t,e,r){this.gl=t,this.attribs={},this.location={},this.gl=t,this.program=t.createProgram(),this.indices=t.createBuffer();const i=this.program;t.attachShader(i,this.create(t.VERTEX_SHADER,e)),t.attachShader(i,this.create(t.FRAGMENT_SHADER,r)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||(console.log(t.getProgramInfoLog(i)),t.deleteProgram(i))}create(t,e){const r=this.gl,i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS)||console.log(r.getShaderInfoLog(i)),i}attrib(t,e,r){const i=this.gl;this.location[t]||(this.location[t]=i.getAttribLocation(this.program,t));const n=this.location[t];return i.bindBuffer(i.ARRAY_BUFFER,e),i.enableVertexAttribArray(n),i.vertexAttribPointer(n,r,i.FLOAT,!1,0,0),this}uniform(t,e){const r=this.gl;this.location[t]||(this.location[t]=r.getUniformLocation(this.program,t));const i=this.location[t];if("number"==typeof e)return r.uniform1f(i,e),this;switch(e.length){case 2:r.uniform2fv(i,e);break;case 3:r.uniform3fv(i,e);break;case 4:r.uniform4fv(i,e);break;case 9:r.uniformMatrix3fv(i,!1,e);break;case 16:r.uniformMatrix4fv(i,!1,e)}return this}}(x,r(1),r(2)),A=new class{constructor(t,e,r){this.mesh=t,this.color=e,this.childs=[],this.active=!0,this.stroke=0,this.transform=new m(r)}add(t){return this.childs.push(t),t.transform.parent=this.transform,this}};function P(){requestAnimationFrame(P),x.clear(x.COLOR_BUFFER_BIT),function t(e,r=0){if(e.childs.forEach(e=>{t(e,r)}),!e.active||!e.mesh)return;const i=e.transform.matrix().invert();i&&(x.cullFace(r>0?x.FRONT:x.BACK),x.useProgram(z.program),z.attrib("aPos",e.mesh.verts,3).attrib("aNorm",e.mesh.normals,3).uniform("uWorld",b.transform(e.transform).data).uniform("uProj",b.perspective().data).uniform("uInverse",i).uniform("uColor",r?[0,0,0,1]:e.color).uniform("uLight",w.clone().sub(b.position).toArray()).uniform("uStroke",r+e.stroke),x.drawArrays(x.TRIANGLES,0,e.mesh.length))}(A)}function M(){v.width=v.clientWidth,v.height=v.clientHeight,b.aspect=v.width/v.height,x.viewport(0,0,v.width,v.height)}d(document,"click",async()=>{const t=document.body;t.className||(t.className="load",M(),await u.init(),await Promise.all([u.sound("exp",new c("custom",[5,1,0],1),[220,0],1),u.sound("hit",new c("custom",[3,1,0],1),[1760,0],.3),u.sound("power",new c("square",[.5,.1,0],1),[440,880,440,880,440,880,440,880],.3),u.sound("jump",new c("triangle",[.5,.1,0],1),[220,880],.1),u.sound("coin",new c("square",[.2,.1,0],.2),[1760,1760],.2),u.sound("move",new c("custom",[.1,.5,0],.3),[1760,440],.3)]),d(window,"resize",M),P(),t.className="run")})}]);</script></body></html>